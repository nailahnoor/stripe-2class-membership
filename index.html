<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2-Class Membership</title>
<style>
  body { font-family: sans-serif; background:#f7f7f7; display:flex; justify-content:center; align-items:center; height:100vh; }
  .container { background:white; padding:24px; border-radius:10px; max-width:400px; width:100%; text-align:center; }
  input, button { width:100%; padding:12px; margin-top:12px; font-size:16px; }
</style>
</head>
<body>
<div class="container">
  <h2>2-Class Membership</h2>
  <input type="email" id="email" placeholder="Enter your email" required>
  <button id="checkout">Sign Up</button>
  <div id="error" style="color:red; margin-top:12px;"></div>
</div>

<script>
document.getElementById("checkout").addEventListener("click", async () => {
  const email = document.getElementById("email").value;
  const errorEl = document.getElementById("error");
  errorEl.textContent = "";

  if (!email) { errorEl.textContent = "Please enter your email"; return; }

  try {
    const res = await fetch("https://stripe-2class-membership.vercel.app/api/create-subscription", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email })
    });

    const data = await res.json();
    if (data.url) {
      window.location.href = data.url; // redirect to Stripe Checkout
    } else {
      errorEl.textContent = data.error || "Something went wrong";
    }
  } catch (err) {
    errorEl.textContent = "Network error. Please try again.";
  }
});
</script>
</body>
</html>
